{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\n\n\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    historyState = historyState || window.history.state || {};\n\n    var path = _DOMUtils.getWindowPath();\n\n    var _historyState = historyState;\n    var key = _historyState.key;\n    var state = undefined;\n\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n      if (isSupported) window.history.replaceState(_extends({}, historyState, {\n        key: key\n      }), null, path);\n    }\n\n    var location = _parsePath2['default'](path);\n\n    return history.createLocation(_extends({}, location, {\n      state: state\n    }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n        window.history.pushState(historyState, null, path);\n      }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n        window.history.replaceState(historyState, null, path);\n      }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n    var unlisten = history.listenBefore(listener);\n    return function () {\n      unlisten();\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n    var unlisten = history.listen(listener);\n    return function () {\n      unlisten();\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  } // deprecated\n\n\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n    history.registerTransitionHook(hook);\n  } // deprecated\n\n\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["C:/Flippay/node_modules/history/lib/createBrowserHistory.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_interopRequireDefault","obj","_invariant","require","_invariant2","_Actions","_ExecutionEnvironment","_DOMUtils","_DOMStateStorage","_createDOMHistory","_createDOMHistory2","_parsePath","_parsePath2","createBrowserHistory","options","undefined","canUseDOM","process","env","NODE_ENV","forceRefresh","isSupported","supportsHistory","useRefresh","getCurrentLocation","historyState","window","history","state","path","getWindowPath","_historyState","readState","createKey","replaceState","location","createLocation","startPopStateListener","_ref","transitionTo","popStateListener","event","addEventListener","removeEventListener","finishTransition","basename","pathname","search","hash","action","POP","saveState","PUSH","href","pushState","replace","listenerCount","stopPopStateListener","listenBefore","listener","unlisten","listen","registerTransitionHook","hook","unregisterTransitionHook","module"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    historyState = historyState || window.history.state || {};\n\n    var path = _DOMUtils.getWindowPath();\n    var _historyState = historyState;\n    var key = _historyState.key;\n\n    var state = undefined;\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n\n      if (isSupported) window.history.replaceState(_extends({}, historyState, { key: key }), null, path);\n    }\n\n    var location = _parsePath2['default'](path);\n\n    return history.createLocation(_extends({}, location, { state: state }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n          window.history.pushState(historyState, null, path);\n        }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n          window.history.replaceState(historyState, null, path);\n        }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listenBefore(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listen(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    history.registerTransitionHook(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}