{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\nfunction isAbsolutePath(path) {\n  return typeof path === 'string' && path.charAt(0) === '/';\n}\n\nfunction ensureSlash() {\n  var path = _DOMUtils.getHashPath();\n\n  if (isAbsolutePath(path)) return true;\n\n  _DOMUtils.replaceHashPath('/' + path);\n\n  return false;\n}\n\nfunction addQueryStringValueToPath(path, key, value) {\n  return path + (path.indexOf('?') === -1 ? '?' : '&') + (key + '=' + value);\n}\n\nfunction stripQueryStringValueFromPath(path, key) {\n  return path.replace(new RegExp('[?&]?' + key + '=[a-zA-Z0-9]+'), '');\n}\n\nfunction getQueryStringValueFromPath(path, key) {\n  var match = path.match(new RegExp('\\\\?.*?\\\\b' + key + '=(.+?)\\\\b'));\n  return match && match[1];\n}\n\nvar DefaultQueryKey = '_k';\n\nfunction createHashHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Hash history needs a DOM') : _invariant2['default'](false) : undefined;\n  var queryKey = options.queryKey;\n  if (queryKey === undefined || !!queryKey) queryKey = typeof queryKey === 'string' ? queryKey : DefaultQueryKey;\n\n  function getCurrentLocation() {\n    var path = _DOMUtils.getHashPath();\n\n    var key = undefined,\n        state = undefined;\n\n    if (queryKey) {\n      key = getQueryStringValueFromPath(path, queryKey);\n      path = stripQueryStringValueFromPath(path, queryKey);\n\n      if (key) {\n        state = _DOMStateStorage.readState(key);\n      } else {\n        state = null;\n        key = history.createKey();\n\n        _DOMUtils.replaceHashPath(addQueryStringValueToPath(path, queryKey, key));\n      }\n    } else {\n      key = state = null;\n    }\n\n    var location = _parsePath2['default'](path);\n\n    return history.createLocation(_extends({}, location, {\n      state: state\n    }), undefined, key);\n  }\n\n  function startHashChangeListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function hashChangeListener() {\n      if (!ensureSlash()) return; // Always make sure hashes are preceeded with a /.\n\n      transitionTo(getCurrentLocation());\n    }\n\n    ensureSlash();\n\n    _DOMUtils.addEventListener(window, 'hashchange', hashChangeListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'hashchange', hashChangeListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    var path = (basename || '') + pathname + search;\n\n    if (queryKey) {\n      path = addQueryStringValueToPath(path, queryKey, key);\n\n      _DOMStateStorage.saveState(key, state);\n    } else {\n      // Drop key and state.\n      location.key = location.state = null;\n    }\n\n    var currentHash = _DOMUtils.getHashPath();\n\n    if (action === _Actions.PUSH) {\n      if (currentHash !== path) {\n        window.location.hash = path;\n      } else {\n        process.env.NODE_ENV !== 'production' ? _warning2['default'](false, 'You cannot PUSH the same path using hash history') : undefined;\n      }\n    } else if (currentHash !== path) {\n      // REPLACE\n      _DOMUtils.replaceHashPath(path);\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopHashChangeListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopHashChangeListener = startHashChangeListener(history);\n    var unlisten = history.listenBefore(listener);\n    return function () {\n      unlisten();\n      if (--listenerCount === 0) stopHashChangeListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopHashChangeListener = startHashChangeListener(history);\n    var unlisten = history.listen(listener);\n    return function () {\n      unlisten();\n      if (--listenerCount === 0) stopHashChangeListener();\n    };\n  }\n\n  function push(location) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || location.state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n    history.push(location);\n  }\n\n  function replace(location) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || location.state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n    history.replace(location);\n  }\n\n  var goIsSupportedWithoutReload = _DOMUtils.supportsGoWithoutReloadUsingHash();\n\n  function go(n) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](goIsSupportedWithoutReload, 'Hash history go(n) causes a full page reload in this browser') : undefined;\n    history.go(n);\n  }\n\n  function createHref(path) {\n    return '#' + history.createHref(path);\n  } // deprecated\n\n\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopHashChangeListener = startHashChangeListener(history);\n    history.registerTransitionHook(hook);\n  } // deprecated\n\n\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n    if (--listenerCount === 0) stopHashChangeListener();\n  } // deprecated\n\n\n  function pushState(state, path) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n    history.pushState(state, path);\n  } // deprecated\n\n\n  function replaceState(state, path) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n    history.replaceState(state, path);\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    push: push,\n    replace: replace,\n    go: go,\n    createHref: createHref,\n    registerTransitionHook: registerTransitionHook,\n    // deprecated - warning is in createHistory\n    unregisterTransitionHook: unregisterTransitionHook,\n    // deprecated - warning is in createHistory\n    pushState: pushState,\n    // deprecated - warning is in createHistory\n    replaceState: replaceState // deprecated - warning is in createHistory\n\n  });\n}\n\nexports['default'] = createHashHistory;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["C:/Flippay/node_modules/history/lib/createHashHistory.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_interopRequireDefault","obj","_warning","require","_warning2","_invariant","_invariant2","_Actions","_ExecutionEnvironment","_DOMUtils","_DOMStateStorage","_createDOMHistory","_createDOMHistory2","_parsePath","_parsePath2","isAbsolutePath","path","charAt","ensureSlash","getHashPath","replaceHashPath","addQueryStringValueToPath","value","indexOf","stripQueryStringValueFromPath","replace","RegExp","getQueryStringValueFromPath","match","DefaultQueryKey","createHashHistory","options","undefined","canUseDOM","process","env","NODE_ENV","queryKey","getCurrentLocation","state","readState","history","createKey","location","createLocation","startHashChangeListener","_ref","transitionTo","hashChangeListener","addEventListener","window","removeEventListener","finishTransition","basename","pathname","search","action","POP","saveState","currentHash","PUSH","hash","listenerCount","stopHashChangeListener","listenBefore","listener","unlisten","listen","push","goIsSupportedWithoutReload","supportsGoWithoutReloadUsingHash","go","n","createHref","registerTransitionHook","hook","unregisterTransitionHook","pushState","replaceState","module"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\nfunction isAbsolutePath(path) {\n  return typeof path === 'string' && path.charAt(0) === '/';\n}\n\nfunction ensureSlash() {\n  var path = _DOMUtils.getHashPath();\n\n  if (isAbsolutePath(path)) return true;\n\n  _DOMUtils.replaceHashPath('/' + path);\n\n  return false;\n}\n\nfunction addQueryStringValueToPath(path, key, value) {\n  return path + (path.indexOf('?') === -1 ? '?' : '&') + (key + '=' + value);\n}\n\nfunction stripQueryStringValueFromPath(path, key) {\n  return path.replace(new RegExp('[?&]?' + key + '=[a-zA-Z0-9]+'), '');\n}\n\nfunction getQueryStringValueFromPath(path, key) {\n  var match = path.match(new RegExp('\\\\?.*?\\\\b' + key + '=(.+?)\\\\b'));\n  return match && match[1];\n}\n\nvar DefaultQueryKey = '_k';\n\nfunction createHashHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Hash history needs a DOM') : _invariant2['default'](false) : undefined;\n\n  var queryKey = options.queryKey;\n\n  if (queryKey === undefined || !!queryKey) queryKey = typeof queryKey === 'string' ? queryKey : DefaultQueryKey;\n\n  function getCurrentLocation() {\n    var path = _DOMUtils.getHashPath();\n\n    var key = undefined,\n        state = undefined;\n    if (queryKey) {\n      key = getQueryStringValueFromPath(path, queryKey);\n      path = stripQueryStringValueFromPath(path, queryKey);\n\n      if (key) {\n        state = _DOMStateStorage.readState(key);\n      } else {\n        state = null;\n        key = history.createKey();\n        _DOMUtils.replaceHashPath(addQueryStringValueToPath(path, queryKey, key));\n      }\n    } else {\n      key = state = null;\n    }\n\n    var location = _parsePath2['default'](path);\n\n    return history.createLocation(_extends({}, location, { state: state }), undefined, key);\n  }\n\n  function startHashChangeListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function hashChangeListener() {\n      if (!ensureSlash()) return; // Always make sure hashes are preceeded with a /.\n\n      transitionTo(getCurrentLocation());\n    }\n\n    ensureSlash();\n    _DOMUtils.addEventListener(window, 'hashchange', hashChangeListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'hashchange', hashChangeListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    var path = (basename || '') + pathname + search;\n\n    if (queryKey) {\n      path = addQueryStringValueToPath(path, queryKey, key);\n      _DOMStateStorage.saveState(key, state);\n    } else {\n      // Drop key and state.\n      location.key = location.state = null;\n    }\n\n    var currentHash = _DOMUtils.getHashPath();\n\n    if (action === _Actions.PUSH) {\n      if (currentHash !== path) {\n        window.location.hash = path;\n      } else {\n        process.env.NODE_ENV !== 'production' ? _warning2['default'](false, 'You cannot PUSH the same path using hash history') : undefined;\n      }\n    } else if (currentHash !== path) {\n      // REPLACE\n      _DOMUtils.replaceHashPath(path);\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopHashChangeListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopHashChangeListener = startHashChangeListener(history);\n\n    var unlisten = history.listenBefore(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopHashChangeListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopHashChangeListener = startHashChangeListener(history);\n\n    var unlisten = history.listen(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopHashChangeListener();\n    };\n  }\n\n  function push(location) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || location.state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n\n    history.push(location);\n  }\n\n  function replace(location) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || location.state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n\n    history.replace(location);\n  }\n\n  var goIsSupportedWithoutReload = _DOMUtils.supportsGoWithoutReloadUsingHash();\n\n  function go(n) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](goIsSupportedWithoutReload, 'Hash history go(n) causes a full page reload in this browser') : undefined;\n\n    history.go(n);\n  }\n\n  function createHref(path) {\n    return '#' + history.createHref(path);\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopHashChangeListener = startHashChangeListener(history);\n\n    history.registerTransitionHook(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n\n    if (--listenerCount === 0) stopHashChangeListener();\n  }\n\n  // deprecated\n  function pushState(state, path) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n\n    history.pushState(state, path);\n  }\n\n  // deprecated\n  function replaceState(state, path) {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](queryKey || state == null, 'You cannot use state without a queryKey it will be dropped') : undefined;\n\n    history.replaceState(state, path);\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    push: push,\n    replace: replace,\n    go: go,\n    createHref: createHref,\n\n    registerTransitionHook: registerTransitionHook, // deprecated - warning is in createHistory\n    unregisterTransitionHook: unregisterTransitionHook, // deprecated - warning is in createHistory\n    pushState: pushState, // deprecated - warning is in createHistory\n    replaceState: replaceState // deprecated - warning is in createHistory\n  });\n}\n\nexports['default'] = createHashHistory;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}